#!/bin/bash
# Configuration globale - Service Overtchat
# Fichier de variables centralisées
# ──────────────────────────────────────────


# Declaration globale
declare -A over info web numeric folders files shell server prog

# Informations sur le service
over["sendmail"]="overtchat@free.fr"
over["support_mail"]="support.${over[sendmail]}"
over["admin_mail"]="service.${over[sendmail]}"

# Licence Service-Overtchat
info["build"]="d2894715292bb1c4fd76aff10ea68f048d69fef3c891ae723cc3"
info["status"]="gratuit"
info["licence"]="Copyright © 2025 Service-Overtchat"

# Gestion Web
web["site"]="http://service.overtchat.free.fr"
web["data"]="${web[site]}/$USER/info.php"
web["sql"]="${web[site]}/$USER/data.php"

# Gestion Git

# Informations de débogage et version
numeric["version"]="2.0.1"  # Version actuelle du programme
numeric["build"]="$(date)"  # Date de compilation
numeric["check"]="$(date)"  # Date de la dernière vérification de mise à jour
numeric["update"]=1         # 0 = désactivé, 1 = activé
numeric["autoupdate"]=1     # 0 = manuel, 1 = gestion automatique

numeric["debug"]=1          # 0 = normal, 1 = installation érroné
numeric["limitfile"]=5M     # Taille limite des fichiers de logs
numeric["mod_folders"]=600  # Permissions des dossiers critiques
numeric["load"]=null        # Visibilité sur le chargement du fichier de configuration

# Dossiers de sécurité
folders["dir_over"]="Service-Overtchat"             # Dossier Générale
folders["dir_conf"]="${folders[dir_over]}/Conf"     # Gestion Config Programme
folders["dir_users"]="${folders[dir_over]}/Users"   # Gestion Access
folders["dir_build"]="${folders[dir_over]}/Build"   # Gestion Programme
folders["dir_logs"]="${folders[dir_over]}/Logs"     # Gestion Logs
folders["dir_lib"]="${folders[dir_over]}/Lib"       # Gestion librairies
folders["dir_egg"]="${folders[dir_over]}/Eggdrop"   # Gestion librairies Eggdrop

# Gestion Compatibilité
folders["dir_unix"]="${folders[dir_build]}/Unix"    # Compatible Linux
folders["dir_win"]="${folders[dir_build]}/Windows"  # Compatible Windows

# Fichiers configuration sécurité
files["conf"]="${folders[dir_conf]}/overtchat.conf"     # Fichier conf générale
files["color"]="${folders[dir_conf]}/colors.conf"     # Fichier gestion couleurs

# Fichiers critiques de sécurité
files["logs"]="${folders[dir_logs]}/logs.dat"           # Fichier Logs générale
files["userlist"]="${folders[dir_users]}/userlist.dat"  # Gestion des Access Users
files["banlist"]="${folders[dir_users]}/banlist.dat"    # Gestion des Access User Banni
files["data_sql"]="${folders[dir_users]}/data_sql.dat"  # Gestion de la base de donnée MariaDB

# Dossiers Lib
shell["build_include"]="${folders[dir_lib]}/include.sh"         # Gestion Export Source
shell["build_core"]="${folders[dir_lib]}/core.sh"               # Compilateur Logs/Packages
shell["build_sql"]="${folders[dir_lib]}/sql.sh"                 # Compilateur MariaDb
shell["build_egg"]="${folders[dir_lib]}/egg.sh"                 # Compilateur Eggdrop
shell["build_setup"]="${folders[dir_lib]}/setup_overtchat.sh"   # Installateur générale

# Serveur Ircd/Ircu
server["unreal"]="https://www.unrealircd.org/downloads/unrealircd-6.2.0.2.tar.gz"
server["ircu"]="https://github.com/ircd-hybrid/ircd-hybrid/archive/8.2.47.tar.gz"

# Programme Eggdrop
prog["eggdrop"]="http://ftp.eggheads.org/pub/eggdrop/source/1.10/eggdrop-1.10.1.tar.gz"

# Programme IriX
prog["build_irix"]="${folders[dir_unix]}/IriX"                          # Programme IriX
shell["build_irix"]="${prog[build_irix]}/install_irix.sh"               # Installateur IriX

# Programme Pooshy
prog["build_pooshy"]="${folders[dir_unix]}/Pooshy"                      # Programme Pooshy
shell["build_pooshy"]="${prog[build_pooshy]}/install_pooshy.sh"         # Installateur Pooshy

# Programme Overtchat
prog["build_overtchat"]="${folders[dir_unix]}/Overtchat"                # Programme Overtchat
shell["build_overtchat"]="${prog[build_overtchat]}/install_over.sh"     # Installateur Overtchat

# Configuration système générale
info["notice_win"]="${folders[dir_lib]}/notice_overtchat.exe" # Notice pour Windows
info["notice_unix"]="${folders[dir_lib]}/notice_overtchat.dat" # Notice pour Linux
